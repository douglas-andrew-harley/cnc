<pre>
; This G-code probes the Y0 position from the front.

o104 sub

M101 ; Ask user about the probe diameter

M70 ; Save modal state
G91 ; Relative/incremental movements
G20 ; Inches

M100 P1; Enable probe input mask
G38.2 Y1.0 F10.0 ; Probe back at fast speed to get close
M100 P0; Disable probe input mask
F20 G01 Y-0.05 ; Forward 0.05

M100 P1; Enable probe input mask
G38.2 Y1.0 F3.75 ; Probe back at slow speed; more precise
M100 P0; Disable probe input mask
F20 G01 Y-0.5 ; Forward 0.5

; Set G54 instead of G92 since that is consistent
; with what AXIS "Touch Off" buttons do
; Set G54 Y offset so current Y is -bar_thick - backoff - bit_offset
G10 L20 P1 Y[-0.125 - 0.5 - #<_hal[probe-radius]>]

G90 ; Absolute movements
G54 ; Select the co-ordinate system just zero'd

M72 ; Restore modal state

o104 endsub
</pre>
